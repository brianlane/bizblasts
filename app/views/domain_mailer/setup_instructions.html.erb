<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Domain Setup Instructions</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        background: linear-gradient(135deg, #6c757d, #adb5bd);
        color: white;
        padding: 30px 20px;
        border-radius: 8px 8px 0 0;
        text-align: center;
      }
      .content {
        background: #f8f9fa;
        padding: 30px 20px;
        border-radius: 0 0 8px 8px;
      }
      .instruction-box {
        background: white;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .code-block {
        background: #f8f8f8;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        padding: 15px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        margin: 10px 0;
        overflow-x: auto;
      }
      .highlight {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 4px;
        padding: 15px;
        margin: 15px 0;
      }
      .step {
        margin: 20px 0;
        padding: 15px;
        border-left: 4px solid #1A5F7A;
        background: white;
      }
      .step h3 {
        margin-top: 0;
        color: #1A5F7A;
      }
      .footer {
        text-align: center;
        padding: 20px;
        color: #666;
        font-size: 14px;
        border-top: 1px solid #ddd;
        margin-top: 30px;
      }
      .button {
        display: inline-block;
        background: #1A5F7A;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>üåê Custom Domain Setup</h1>
      <p>Connect <strong><%= @domain %></strong> to your BizBlasts site</p>
    </div>

    <div class="content">
      <p>Hi <%= @user.first_name || @user.email %>,</p>

      <p>Great news! We've started setting up your custom domain <strong><%= @domain %></strong> for <%= @business.name %>. Now we need you to configure a CNAME record with your domain registrar to complete the setup.</p>

      <div class="highlight">
        <strong>‚è±Ô∏è Time Sensitive:</strong> We'll monitor your DNS changes for the next hour. Please complete these steps as soon as possible.
      </div>

      <div class="step">
        <h3>Step 1: Log into your domain registrar</h3>
        <p>Access the DNS management panel for <strong><%= @domain %></strong> with your domain registrar (GoDaddy, Namecheap, Cloudflare, etc.).</p>
      </div>

      <div class="step">
        <h3>Step 2: Add a CNAME record</h3>
        <p>Create a new CNAME record with these exact settings:</p>
        
        <div class="code-block">
          <strong>Name/Host:</strong> <%= @cname_name %><br>
          <strong>Type:</strong> CNAME<br>
          <strong>Value/Target:</strong> <%= @render_target %><br>
          <strong>TTL:</strong> Auto or 300 (5 minutes)
        </div>

        <div class="highlight">
          <strong>üí° Important:</strong> 
          <ul>
            <li>Use exactly "<strong><%= @render_target %></strong>" as the target</li>
            <li>Some registrars require a trailing dot: "<strong><%= @render_target %>.</strong>"</li>
            <li>Also add an A/ALIAS at the apex if the registrar requires apex verification:</li>
          </ul>
          <div class="code-block">
            <strong>Name/Host:</strong> @<br>
            <strong>Type:</strong> A (or ALIAS/ANAME if supported)<br>
            <strong>Value/Target:</strong> 216.24.57.1 (Render apex IP)<br>
            <strong>TTL:</strong> Auto or 300 (5 minutes)
          </div>
          <ul>
            <li>If your registrar supports domain forwarding, you may forward apex ‚Üí www instead.</li>
          </ul>
        </div>
      </div>

      <div class="step">
        <h3>Step 3: Wait for verification</h3>
        <p>After adding the CNAME record:</p>
        <ul>
          <li>DNS changes can take 5-15 minutes to propagate</li>
          <li>We'll automatically check every 5 minutes</li>
          <li>You'll receive a confirmation email when it's ready</li>
        </ul>
      </div>

      <div class="instruction-box">
        <h3>üîç Need Help?</h3>
        <p>If you're unsure how to add a CNAME record with your specific registrar:</p>
        <ul>
          <li><strong>GoDaddy:</strong> Go to DNS Management ‚Üí Add Record ‚Üí CNAME</li>
          <li><strong>Namecheap:</strong> Go to Domain List ‚Üí Manage ‚Üí Advanced DNS ‚Üí Add New Record</li>
          <li><strong>Cloudflare:</strong> Go to DNS ‚Üí Add Record ‚Üí CNAME</li>
          <li><strong>Detailed Setup Guide:</strong> <a href="https://www.bizblasts.com/docs/custom-domain-faq">Custom Domain FAQ</a></li>
          <li><strong>Need more help?</strong> Forward this email to <a href="mailto:<%= @support_email %>"><%= @support_email %></a></li>
        </ul>
      </div>

      <div class="step">
        <h3>What happens next?</h3>
        <p>Once your CNAME is configured:</p>
        <ul>
          <li>‚úÖ Your domain will automatically activate</li>
          <li>‚úÖ SSL certificate will be issued (may take up to 24 hours)</li>
          <li>‚úÖ All traffic will redirect to HTTPS</li>
          <li>‚úÖ Your BizBlasts site will be live at <strong><%= @domain %></strong></li>
        </ul>
      </div>
    </div>

    <div class="footer">
      <p>This email was sent from BizBlasts regarding your custom domain setup.<br>
      If you need assistance, reply to this email or contact <a href="mailto:<%= @support_email %>"><%= @support_email %></a></p>
    </div>
  </body>
</html>