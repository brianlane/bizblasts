<% current_business = local_assigns[:business] %>
<% return unless current_business&.show_estimate_page? %>

<% enhanced_layout = current_business.website_layout_enhanced? %>
<% wrapper_classes = enhanced_layout ? "estimate-cta-section py-16 bg-[rgba(11,17,32,0.9)] text-white" : "estimate-cta-section bg-white py-16" %>
<% heading_classes = enhanced_layout ? "text-3xl md:text-4xl font-bold text-white" : "text-3xl md:text-4xl font-bold text-gray-900" %>
<% description_classes = enhanced_layout ? "text-gray-300 mt-4 text-lg max-w-2xl" : "text-gray-600 mt-4 text-lg max-w-2xl" %>
<% button_classes = enhanced_layout ? "inline-flex items-center px-6 py-3 text-base font-semibold text-white accent-bg rounded-full shadow-lg hover:opacity-95 transition" : "inline-flex items-center px-6 py-3 text-base font-semibold text-white bg-gray-900 rounded-full shadow hover:bg-gray-800 transition" %>
<% secondary_classes = enhanced_layout ? "text-sm text-gray-300 mt-3" : "text-sm text-gray-500 mt-3" %>

<div class="<%= wrapper_classes %>">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="rounded-3xl border <%= enhanced_layout ? 'border-white/15 bg-[rgba(15,23,42,0.6)]' : 'border-gray-100 bg-gray-50' %> p-8 sm:p-10">
      <p class="text-sm uppercase tracking-[0.3em] <%= enhanced_layout ? 'accent-text' : 'text-gray-500' %>">Estimates</p>
      <h2 class="<%= heading_classes %>">
        <%= section.content_data['title'].presence || 'Need A Custom Estimate?' %>
      </h2>
      <% if section.content_data['description'].present? %>
        <p class="<%= description_classes %>">
          <%= section.content_data['description'] %>
        </p>
      <% end %>

      <div class="mt-8 flex flex-col sm:flex-row sm:items-center gap-4">
        <%= link_to(section.content_data['button_text'].presence || 'Start Estimate',
                    tenant_estimate_page_path,
                    class: button_classes) %>
        <% if section.content_data['button_subtext'].present? %>
          <p class="<%= secondary_classes %>"><%= section.content_data['button_subtext'] %></p>
        <% end %>
      </div>
    </div>
  </div>
</div>


