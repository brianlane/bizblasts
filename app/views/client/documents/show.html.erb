<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-6">
  <div class="flex items-center gap-3 text-sm">
    <%= link_to 'â† Back to documents', client_documents_path, class: 'text-blue-600 hover:text-blue-700 font-medium' %>
    <span class="text-gray-400">/</span>
    <span class="text-gray-600"><%= @document.title || document_type_label(@document) %></span>
  </div>

  <div class="bg-white rounded-2xl shadow p-6 sm:p-8 space-y-6">
    <div class="flex flex-col gap-3 md:flex-row md:items-start md:justify-between">
      <div>
        <p class="text-sm text-gray-500"><%= @document.business.name %></p>
        <h1 class="text-3xl font-bold text-gray-900"><%= @document.title || document_type_label(@document) %></h1>
        <p class="text-sm text-gray-500 mt-1">
          Updated <%= @document.updated_at.strftime("%B %d, %Y %l:%M %p") %>
        </p>
      </div>
      <span class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-semibold <%= document_status_badge(@document.status) %>">
        <%= @document.status.humanize %>
      </span>
    </div>

    <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-600">
      <div class="rounded-xl border border-gray-100 p-4">
        <dt class="text-gray-500">Document Type</dt>
        <dd class="mt-1 font-semibold text-gray-900"><%= document_type_label(@document) %></dd>
      </div>
      <div class="rounded-xl border border-gray-100 p-4">
        <dt class="text-gray-500">Signature Required</dt>
        <dd class="mt-1 font-semibold text-gray-900">
          <%= @document.signature_required? ? 'Yes' : 'No' %>
        </dd>
      </div>
      <div class="rounded-xl border border-gray-100 p-4">
        <dt class="text-gray-500">Payment Required</dt>
        <dd class="mt-1 font-semibold text-gray-900">
          <%= @document.payment_required? ? number_to_currency(@document.deposit_amount || 0) : 'No payment required' %>
        </dd>
      </div>
      <div class="rounded-xl border border-gray-100 p-4">
        <dt class="text-gray-500">Document ID</dt>
        <dd class="mt-1 font-semibold text-gray-900">DOC-<%= @document.id %></dd>
      </div>
    </dl>

    <div class="space-y-3">
      <% if @document.pdf.attached? %>
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
          <p class="text-sm text-gray-600">A PDF copy of this document is attached. You can view or download it for your records.</p>
          <%= link_to 'Download PDF',
                rails_blob_path(@document.pdf, disposition: 'attachment'),
                class: "inline-flex items-center px-4 py-2 rounded-xl bg-blue-600 text-white text-sm font-semibold shadow hover:bg-blue-700",
                target: "_blank", rel: "noopener" %>
        </div>
        <div class="border rounded-xl overflow-hidden">
          <iframe src="<%= rails_blob_path(@document.pdf, disposition: 'inline') %>"
                  class="w-full h-[600px]" title="Document Preview"></iframe>
        </div>
      <% else %>
        <div class="rounded-xl border border-dashed border-gray-300 p-6 text-center text-sm text-gray-500">
          No file is attached to this document. Please contact the business if you need a copy.
        </div>
      <% end %>
    </div>
  </div>
</div>

