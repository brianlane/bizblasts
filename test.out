4 processes for 33 specs, ~ 8 specs per process
Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 38936
.Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 59978
.Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 56925
........Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 35429
--- Loading seeds for seed context ---
Seeding database with sample data...
Creating default tenant...
Default tenant created: Default Business (default) ID: 1
Creating admin user (skipped in production)...
Admin user created with email: admin@example.com and password: password123
Creating sample data for Default Business...
Created customer: Micheal Quitzon
Created customer: Leatha Wuckert DVM
Created customer: Melanie Sporer
Created service: Basic Consultation
Created service: Website Setup
Created service: Monthly Support
Created staff member: Staff Member 1
Created staff member: Staff Member 2
Created booking at 2025-04-21 09:00 - 09:30 for Staff Member 1
Created booking at 2025-04-22 12:00 - 13:00 for Staff Member 1
Created booking at 2025-04-14 15:00 - 16:00 for Staff Member 1
Created booking at 2025-04-23 09:00 - 09:30 for Staff Member 2
Created booking at 2025-04-10 12:00 - 12:30 for Staff Member 2
Seed data creation complete!
Created admin user: bizblaststeam@gmail.com with password from ENV
.................................................................................................................................................................
.
Top 10 slowest examples (1.1 seconds, 34.6% of total time):
  MultiTenant Registration users with identical emails in different tenants allows registration and authentication with the same email in different businesses
    0.3433 seconds ./spec/requests/multi_tenant_registration_spec.rb:23
  Booking validations is valid if end_time is after start_time
    0.12645 seconds ./spec/models/booking_spec.rb:40
  BookingManager.cancel_booking records the cancellation reason if provided
    0.09579 seconds ./spec/services/booking_manager_spec.rb:234
  BookingManager.create_booking when booking params are invalid (e.g., missing service) does not create a booking and returns validation errors
    0.09124 seconds ./spec/services/booking_manager_spec.rb:111
  User acts_as_tenant integration scopes queries to the current tenant
    0.08403 seconds ./spec/models/user_spec.rb:91
  BookingManager.create_booking when the time slot is available schedules two booking reminders
    0.08054 seconds ./spec/services/booking_manager_spec.rb:68
  AvailabilityService.available_slots when staff member has standard 9-5 availability and an existing appointment conflicts excludes slots that overlap with the booking (considering buffer/duration)
    0.07173 seconds ./spec/services/availability_service_spec.rb:99
  Booking associations is expected to belong to business required: true
    0.06878 seconds ./spec/models/booking_spec.rb:5
  AvailabilityService.available_slots when staff member has standard 9-5 availability and no existing appointments returns all slots within the 9-5 range for a 60min service
    0.06801 seconds ./spec/services/availability_service_spec.rb:53
  BookingManager.create_booking when the time slot is available creates a new booking
    0.06724 seconds ./spec/services/booking_manager_spec.rb:53

Top 7 slowest example groups:
  MultiTenant Registration
    0.3456 seconds average (0.3456 seconds / 1 example) ./spec/requests/multi_tenant_registration_spec.rb:5
  BookingManager
    0.06796 seconds average (0.9514 seconds / 14 examples) ./spec/services/booking_manager_spec.rb:5
  AvailabilityService
    0.06517 seconds average (0.26069 seconds / 4 examples) ./spec/services/availability_service_spec.rb:4
  Booking
    0.06011 seconds average (0.54101 seconds / 9 examples) ./spec/models/booking_spec.rb:3
  User
    0.04981 seconds average (0.69732 seconds / 14 examples) ./spec/models/user_spec.rb:5
  Admin Configuration
    0.04321 seconds average (0.12962 seconds / 3 examples) ./spec/system/admin/companies_spec.rb:4
  ServiceTemplate
    0.03752 seconds average (0.18762 seconds / 5 examples) ./spec/models/service_template_spec.rb:3

Finished in 3.17 seconds (files took 5.07 seconds to load)
50 examples, 0 failures

Randomized with seed 56925

......................Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)
.....

Top 10 slowest examples (1.02 seconds, 27.8% of total time):
  PromotionManager.apply_promotion_to_invoice with an invalid promotion code returns validation error and does not modify invoice or redemption
    0.14569 seconds ./spec/services/promotion_manager_spec.rb:323
  PromotionManager.apply_promotion_to_invoice with a valid percentage promotion applies discount, updates invoice, increments usage, creates redemption
    0.1403 seconds ./spec/services/promotion_manager_spec.rb:293
  Application Routes Admin routes GET /admin/login returns success
    0.1129 seconds ./spec/requests/routes_spec.rb:34
  Application Routes Admin routes when authenticated GET /admin/dashboard returns success
    0.0937 seconds ./spec/requests/routes_spec.rb:49
  PromotionManager.apply_promotion_to_booking when booking amount is already 0 does not apply further discount but records redemption and increments usage
    0.09017 seconds ./spec/services/promotion_manager_spec.rb:246
  StaffMember scopes .active returns only active staff members
    0.08821 seconds ./spec/models/service_provider_spec.rb:24
  PromotionManager.validate_promotion_code with an invalid code returns valid: false and an error message
    0.0872 seconds ./spec/services/promotion_manager_spec.rb:46
  Application Routes Public routes GET / returns success
    0.0866 seconds ./spec/requests/routes_spec.rb:13
  PromotionManager.apply_promotion_to_booking when fixed discount is greater than booking amount discounts amount to 0 and records correct discount amount
    0.08613 seconds ./spec/services/promotion_manager_spec.rb:217
  PromotionManager.apply_promotion_to_booking with a valid fixed amount promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.08436 seconds ./spec/services/promotion_manager_spec.rb:156

Top 7 slowest example groups:
  Application Routes
    0.08224 seconds average (0.49344 seconds / 6 examples) ./spec/requests/routes_spec.rb:3
  PromotionManager
    0.08008 seconds average (1.44 seconds / 18 examples) ./spec/services/promotion_manager_spec.rb:5
  Admin Debug Page
    0.06232 seconds average (0.68548 seconds / 11 examples) ./spec/requests/admin/debug_spec.rb:5
  StaffMember
    0.05358 seconds average (0.26789 seconds / 5 examples) ./spec/models/service_provider_spec.rb:5
  Business
    0.04549 seconds average (0.45489 seconds / 10 examples) ./spec/models/business_spec.rb:5
  HomeController
    0.0436 seconds average (0.0436 seconds / 1 example) ./spec/controllers/home_controller_spec.rb:5
  TenantCustomer
    0.04217 seconds average (0.21084 seconds / 5 examples) ./spec/models/tenant_customer_spec.rb:5

Finished in 3.65 seconds (files took 5.07 seconds to load)
56 examples, 0 failures

Randomized with seed 38936

.....

Top 10 slowest examples (1.37 seconds, 36.6% of total time):
  MarketingService.get_campaign_metrics for a combined campaign returns combined placeholder metrics
    0.26836 seconds ./spec/services/marketing_service_spec.rb:221
  MarketingService.get_campaign_metrics for an SMS campaign returns metrics based on associated SmsMessages
    0.21167 seconds ./spec/services/marketing_service_spec.rb:204
  MarketingService.get_campaign_metrics for an email campaign returns placeholder email metrics
    0.20822 seconds ./spec/services/marketing_service_spec.rb:195
  MarketingService.segment_customers returns all active customers if no filters provided
    0.14468 seconds ./spec/services/marketing_service_spec.rb:289
  MarketingService.execute_campaign with a non-scheduled campaign does not call send methods or complete!
    0.10267 seconds ./spec/services/marketing_service_spec.rb:140
  MarketingService.execute_campaign with a scheduled campaign calls the correct send method based on type (email)
    0.09828 seconds ./spec/services/marketing_service_spec.rb:109
  AnalyticsProcessingJob#perform with report_type: booking_summary without tenant_id (global) processes booking summary for all tenants
    0.09451 seconds ./spec/jobs/analytics_processing_job_spec.rb:45
  AnalyticsProcessingJob#perform with report_type: booking_summary with tenant_id processes booking summary scoped to the tenant
    0.09252 seconds ./spec/jobs/analytics_processing_job_spec.rb:63
  MarketingService.segment_customers with combined filters returns customers matching all criteria
    0.07539 seconds ./spec/services/marketing_service_spec.rb:278
  MarketingService.segment_customers with :has_booking_in_last_days filter returns customers with recent bookings
    0.07459 seconds ./spec/services/marketing_service_spec.rb:248

Top 7 slowest example groups:
  MarketingService
    0.08748 seconds average (2.19 seconds / 25 examples) ./spec/services/marketing_service_spec.rb:5
  AnalyticsProcessingJob
    0.08705 seconds average (0.26116 seconds / 3 examples) ./spec/jobs/analytics_processing_job_spec.rb:5
  TenantScoped
    0.05714 seconds average (0.22856 seconds / 4 examples) ./spec/models/tenant_scoped_spec.rb:5
  StaffMember
    0.04982 seconds average (0.59783 seconds / 12 examples) ./spec/models/staff_member_spec.rb:5
  Maintenance
    0.03899 seconds average (0.15596 seconds / 4 examples) ./spec/requests/maintenance_spec.rb:5
  ApplicationMailer
    0.03869 seconds average (0.07738 seconds / 2 examples) ./spec/mailers/application_mailer_spec.rb:5
  Health Checks
    0.03582 seconds average (0.17909 seconds / 5 examples) ./spec/requests/health_spec.rb:5

Finished in 3.75 seconds (files took 5.1 seconds to load)
55 examples, 0 failures

Randomized with seed 59978

.........Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)
Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)
......

Top 10 slowest examples (2.19 seconds, 46.7% of total time):
  Admin Companies POST /admin/businesses creates a new business
    0.97091 seconds ./spec/requests/admin/companies_spec.rb:49
  MultiTenant Email Uniqueness allows the same email to be used across different tenants when properly configured
    0.3724 seconds ./spec/integration/multi_tenant_registration_spec.rb:6
  Admin Companies GET /admin/businesses lists all businesses
    0.13055 seconds ./spec/requests/admin/companies_spec.rb:41
  Authentication user sign in shows an error with incorrect credentials
    0.12198 seconds ./spec/system/authentication_spec.rb:26
  Admin Companies DELETE /admin/businesses/:id deletes a business
    0.11909 seconds ./spec/requests/admin/companies_spec.rb:67
  Authentication user sign out allows a signed-in user to sign out
    0.10792 seconds ./spec/system/authentication_spec.rb:159
  Admin Companies authentication allows authenticated admin users to access
    0.10631 seconds ./spec/requests/admin/companies_spec.rb:34
  Admin Dashboard GET /admin has a link to tenant debug information
    0.08779 seconds ./spec/requests/admin/dashboard_spec.rb:19
  SmsService.send_booking_confirmation calls send_message with the correct arguments and formatted message
    0.08768 seconds ./spec/services/sms_service_spec.rb:87
  Admin Dashboard GET /admin shows system metrics
    0.08444 seconds ./spec/requests/admin/dashboard_spec.rb:13

Top 9 slowest example groups:
  MultiTenant Email Uniqueness
    0.37381 seconds average (0.37381 seconds / 1 example) ./spec/integration/multi_tenant_registration_spec.rb:5
  Admin Companies
    0.2005 seconds average (1.6 seconds / 8 examples) ./spec/requests/admin/companies_spec.rb:5
  Admin Dashboard
    0.08436 seconds average (0.25306 seconds / 3 examples) ./spec/requests/admin/dashboard_spec.rb:5
  Authentication
    0.07956 seconds average (0.71608 seconds / 9 examples) ./spec/system/authentication_spec.rb:6
  SmsService
    0.06066 seconds average (0.72792 seconds / 12 examples) ./spec/services/sms_service_spec.rb:5
  Home
    0.04892 seconds average (0.2446 seconds / 5 examples) ./spec/requests/home_spec.rb:5
  Service
    0.03945 seconds average (0.35507 seconds / 9 examples) ./spec/models/service_spec.rb:5
  ApplicationJob
    0.03616 seconds average (0.03616 seconds / 1 example) ./spec/jobs/application_job_spec.rb:5
  Database seeds
    0.03199 seconds average (0.31992 seconds / 10 examples) ./spec/seeds/seeds_spec.rb:6

Finished in 4.69 seconds (files took 5.08 seconds to load)
58 examples, 0 failures

Randomized with seed 35429

Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)

219 examples, 0 failures

Took 10 seconds
