4 processes for 33 specs, ~ 8 specs per process
Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 18323
.Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 28323
..Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 7541
...Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 54372
...................................................................................................................................................................

Top 10 slowest examples (1.14 seconds, 34.4% of total time):
  MultiTenant Registration users with identical emails in different tenants allows registration and authentication with the same email in different businesses
    0.33207 seconds ./spec/requests/multi_tenant_registration_spec.rb:23
  BookingManager.create_booking when the time slot is available schedules two booking reminders
    0.15506 seconds ./spec/services/booking_manager_spec.rb:68
  BookingManager.create_booking when the time slot is available creates a new booking
    0.11812 seconds ./spec/services/booking_manager_spec.rb:53
  User#staff? returns true for staff roles
    0.09037 seconds ./spec/models/user_spec.rb:72
  User scopes .active returns only active users
    0.08714 seconds ./spec/models/user_spec.rb:49
  User scopes .staff_users returns admin, manager, and staff roles
    0.07861 seconds ./spec/models/user_spec.rb:54
  AvailabilityService.available_slots when staff member has standard 9-5 availability and no existing appointments returns slots for a different interval (e.g., 15 mins)
    0.07299 seconds ./spec/services/availability_service_spec.rb:75
  BookingManager.cancel_booking updates the booking status to cancelled
    0.07153 seconds ./spec/services/booking_manager_spec.rb:228
  BookingManager.update_booking when updating non-time attributes does not reschedule reminders
    0.06991 seconds ./spec/services/booking_manager_spec.rb:143
  BookingManager.cancel_booking records the cancellation reason if provided
    0.06915 seconds ./spec/services/booking_manager_spec.rb:234

Top 7 slowest example groups:
  MultiTenant Registration
    0.33409 seconds average (0.33409 seconds / 1 example) ./spec/requests/multi_tenant_registration_spec.rb:5
.  BookingManager
    0.0729 seconds average (1.02 seconds / 14 examples) ./spec/services/booking_manager_spec.rb:5
  AvailabilityService
    0.06641 seconds average (0.26564 seconds / 4 examples) ./spec/services/availability_service_spec.rb:4
  User
    0.06013 seconds average (0.84184 seconds / 14 examples) ./spec/models/user_spec.rb:5
  Booking
    0.04738 seconds average (0.42639 seconds / 9 examples) ./spec/models/booking_spec.rb:3
  ServiceTemplate
    0.0458 seconds average (0.22901 seconds / 5 examples) ./spec/models/service_template_spec.rb:3
  Admin Configuration
    0.03827 seconds average (0.11482 seconds / 3 examples) ./spec/system/admin/companies_spec.rb:4

Finished in 3.33 seconds (files took 5.01 seconds to load)
50 examples, 0 failures

Randomized with seed 18323

....................Coverage report generated for RSpec-3 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 42.58% (981 / 2304)
Branch Coverage: 8.81% (46 / 522)
...

Top 10 slowest examples (1.11 seconds, 29.5% of total time):
  PromotionManager.apply_promotion_to_booking when fixed discount is greater than booking amount discounts amount to 0 and records correct discount amount
    0.1623 seconds ./spec/services/promotion_manager_spec.rb:217
  Admin Debug Page GET /admin/debug when request is within a tenant context shows current request info with the correct tenant
    0.14015 seconds ./spec/requests/admin/debug_spec.rb:95
  Application Routes Admin routes when authenticated GET /admin/dashboard returns success
    0.13827 seconds ./spec/requests/routes_spec.rb:49
  PromotionManager.apply_promotion_to_booking with a valid fixed amount promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.11851 seconds ./spec/services/promotion_manager_spec.rb:156
  Admin Debug Page GET /admin/debug when no tenants exist displays the correct title
    0.10292 seconds ./spec/requests/admin/debug_spec.rb:21
  PromotionManager.apply_promotion_to_invoice with a valid percentage promotion applies discount, updates invoice, increments usage, creates redemption
    0.09826 seconds ./spec/services/promotion_manager_spec.rb:293
  PromotionManager.apply_promotion_to_booking with a valid percentage promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.09173 seconds ./spec/services/promotion_manager_spec.rb:129
  Application Routes Admin routes GET /admin/login returns success
    0.09048 seconds ./spec/requests/routes_spec.rb:34
  PromotionManager.apply_promotion_to_booking when booking amount is already 0 does not apply further discount but records redemption and increments usage
    0.08525 seconds ./spec/services/promotion_manager_spec.rb:246
  PromotionManager.validate_promotion_code with a code that reached its usage limit returns valid: false and an error message
    0.07768 seconds ./spec/services/promotion_manager_spec.rb:73

Top 7 slowest example groups:
  Admin Debug Page
    0.07929 seconds average (0.8722 seconds / 11 examples) ./spec/requests/admin/debug_spec.rb:5
  Application Routes
    0.07842 seconds average (0.47052 seconds / 6 examples) ./spec/requests/routes_spec.rb:3
  PromotionManager
    0.07833 seconds average (1.41 seconds / 18 examples) ./spec/services/promotion_manager_spec.rb:5
  StaffMember
    0.04945 seconds average (0.24727 seconds / 5 examples) ./spec/models/service_provider_spec.rb:5
  HomeController
    0.04708 seconds average (0.04708 seconds / 1 example) ./spec/controllers/home_controller_spec.rb:5
  TenantCustomer
    0.04256 seconds average (0.2128 seconds / 5 examples) ./spec/models/tenant_customer_spec.rb:5
  Business
    0.0423 seconds average (0.42296 seconds / 10 examples) ./spec/models/business_spec.rb:5

Finished in 3.75 seconds (files took 5 seconds to load)
56 examples, 0 failures

Randomized with seed 7541

.

Top 10 slowest examples (1.27 seconds, 33.6% of total time):
  MarketingService.get_campaign_metrics for a combined campaign returns combined placeholder metrics
    0.22597 seconds ./spec/services/marketing_service_spec.rb:221
  MarketingService.get_campaign_metrics for an email campaign returns placeholder email metrics
    0.18889 seconds ./spec/services/marketing_service_spec.rb:195
  MarketingService.get_campaign_metrics for an SMS campaign returns metrics based on associated SmsMessages
    0.1618 seconds ./spec/services/marketing_service_spec.rb:204
  MarketingService.segment_customers returns all active customers if no filters provided
    0.12988 seconds ./spec/services/marketing_service_spec.rb:289
  MarketingService.create_campaign with valid parameters creates a new MarketingCampaign
    0.12232 seconds ./spec/services/marketing_service_spec.rb:26
  MarketingService.execute_campaign with a non-scheduled campaign does not call send methods or complete!
    0.09511 seconds ./spec/services/marketing_service_spec.rb:140
  MarketingService.cancel_campaign when campaign cannot be cancelled (e.g., completed) returns an error and does not change status
    0.09385 seconds ./spec/services/marketing_service_spec.rb:173
  MarketingService.segment_customers with combined filters returns customers matching all criteria
    0.0921 seconds ./spec/services/marketing_service_spec.rb:278
  MarketingService.segment_customers with :service_id filter returns customers who booked a specific service
    0.07895 seconds ./spec/services/marketing_service_spec.rb:260
  MarketingService.segment_customers with :no_booking_in_last_days filter returns customers without recent bookings
    0.0782 seconds ./spec/services/marketing_service_spec.rb:270

Top 7 slowest example groups:
  MarketingService
    0.08986 seconds average (2.25 seconds / 25 examples) ./spec/services/marketing_service_spec.rb:5
  AnalyticsProcessingJob
    0.07393 seconds average (0.2218 seconds / 3 examples) ./spec/jobs/analytics_processing_job_spec.rb:5
  TenantScoped
    0.05145 seconds average (0.20579 seconds / 4 examples) ./spec/models/tenant_scoped_spec.rb:5
  StaffMember
    0.04901 seconds average (0.58808 seconds / 12 examples) ./spec/models/staff_member_spec.rb:5
  Maintenance
    0.0486 seconds average (0.19438 seconds / 4 examples) ./spec/requests/maintenance_spec.rb:5
  Health Checks
    0.03615 seconds average (0.18076 seconds / 5 examples) ./spec/requests/health_spec.rb:5
  ApplicationMailer
    0.03554 seconds average (0.07108 seconds / 2 examples) ./spec/mailers/application_mailer_spec.rb:5

Finished in 3.77 seconds (files took 5.01 seconds to load)
55 examples, 0 failures

Randomized with seed 28323

.........Coverage report generated for RSpec-, RSpec-2, RSpec-3 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 53.04% (1222 / 2304)
Branch Coverage: 25.1% (131 / 522)
Coverage report generated for RSpec-, RSpec-2, RSpec-3 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 53.04% (1222 / 2304)
Branch Coverage: 25.1% (131 / 522)
......--- Loading seeds for seed context ---
Seeding database with sample data...
Creating default tenant...
Default tenant created: Default Business (default) ID: 1
Creating admin user (skipped in production)...
Admin user created with email: admin@example.com and password: password123
Creating sample data for Default Business...
Created customer: Sigrid Gerhold Esq.
Created customer: Sherwood Feest Esq.
Created customer: Alvin Roberts
Created service: Basic Consultation
Created service: Website Setup
Created service: Monthly Support
Created staff member: Staff Member 1
Created staff member: Staff Member 2
Created booking at 2025-04-14 09:00 - 11:00 for Staff Member 1
Created booking at 2025-04-22 12:00 - 13:00 for Staff Member 1
Created booking at 2025-04-21 15:00 - 15:30 for Staff Member 1
Created booking at 2025-04-16 09:00 - 10:00 for Staff Member 2
Created booking at 2025-04-10 12:00 - 12:30 for Staff Member 2
Created booking at 2025-04-23 15:00 - 16:00 for Staff Member 2
Seed data creation complete!
Created admin user: bizblaststeam@gmail.com with password from ENV
..........

Top 10 slowest examples (2.25 seconds, 48.1% of total time):
  Admin Companies POST /admin/businesses creates a new business
    0.9739 seconds ./spec/requests/admin/companies_spec.rb:49
  MultiTenant Email Uniqueness allows the same email to be used across different tenants when properly configured
    0.34431 seconds ./spec/integration/multi_tenant_registration_spec.rb:6
  Admin Dashboard GET /admin shows system metrics
    0.15043 seconds ./spec/requests/admin/dashboard_spec.rb:13
  SmsService.process_webhook with delivered status updates the sms message status to delivered
    0.14389 seconds ./spec/services/sms_service_spec.rb:156
  SmsService.send_booking_reminder for 24h timeframe calls send_message with the correct arguments and formatted message
    0.12371 seconds ./spec/services/sms_service_spec.rb:109
  Admin Companies DELETE /admin/businesses/:id deletes a business
    0.11801 seconds ./spec/requests/admin/companies_spec.rb:67
  Admin Companies GET /admin/businesses lists all businesses
    0.10437 seconds ./spec/requests/admin/companies_spec.rb:41
  SmsService.process_webhook with failed status updates the sms message status to failed and records error
    0.10265 seconds ./spec/services/sms_service_spec.rb:165
  Admin Dashboard GET /admin displays the admin dashboard
    0.09611 seconds ./spec/requests/admin/dashboard_spec.rb:7
  Admin Dashboard GET /admin has a link to tenant debug information
    0.0937 seconds ./spec/requests/admin/dashboard_spec.rb:19

Top 9 slowest example groups:
  MultiTenant Email Uniqueness
    0.34593 seconds average (0.34593 seconds / 1 example) ./spec/integration/multi_tenant_registration_spec.rb:5
  Admin Companies
    0.19027 seconds average (1.52 seconds / 8 examples) ./spec/requests/admin/companies_spec.rb:5
  Admin Dashboard
    0.11376 seconds average (0.34129 seconds / 3 examples) ./spec/requests/admin/dashboard_spec.rb:5
  ApplicationJob
    0.08374 seconds average (0.08374 seconds / 1 example) ./spec/jobs/application_job_spec.rb:5
  SmsService
    0.08111 seconds average (0.97327 seconds / 12 examples) ./spec/services/sms_service_spec.rb:5
  Authentication
    0.06462 seconds average (0.58156 seconds / 9 examples) ./spec/system/authentication_spec.rb:6
  Service
    0.0478 seconds average (0.43019 seconds / 9 examples) ./spec/models/service_spec.rb:5
  Home
    0.04213 seconds average (0.21067 seconds / 5 examples) ./spec/requests/home_spec.rb:5
  Database seeds
    0.01235 seconds average (0.12348 seconds / 10 examples) ./spec/seeds/seeds_spec.rb:6

Finished in 4.68 seconds (files took 5.05 seconds to load)
58 examples, 0 failures

Randomized with seed 54372

Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)

219 examples, 0 failures

Took 10 seconds
