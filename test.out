4 processes for 33 specs, ~ 8 specs per process
Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 4068
....Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 65106
.Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 4290
.....Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 46230
...................................................................................................................................................................

Top 10 slowest examples (1.14 seconds, 33.7% of total time):
  MultiTenant Registration users with identical emails in different tenants allows registration and authentication with the same email in different businesses
    0.37578 seconds ./spec/requests/multi_tenant_registration_spec.rb:23
  BookingManager.cancel_booking records the cancellation reason if provided
    0.15363 seconds ./spec/services/booking_manager_spec.rb:234
  AvailabilityService.available_slots when staff member has standard 9-5 availability and no existing appointments returns slots for a different interval (e.g., 15 mins)
    0.0858 seconds ./spec/services/availability_service_spec.rb:75
  BookingManager.cancel_booking updates the booking status to cancelled
    0.07976 seconds ./spec/services/booking_manager_spec.rb:228
  BookingManager.create_booking when the time slot is available schedules two booking reminders
    0.07698 seconds ./spec/services/booking_manager_spec.rb:68
  BookingManager.create_booking when the time slot is available creates a new booking
    0.07603 seconds ./spec/services/booking_manager_spec.rb:53
  BookingManager.update_booking when updating non-time attributes updates the booking successfully
    0.07536 seconds ./spec/services/booking_manager_spec.rb:136
  User scopes .active returns only active users
    0.07149 seconds ./spec/models/user_spec.rb:49
  AvailabilityService.available_slots when staff member has standard 9-5 availability and an existing appointment conflicts excludes slots that overlap with the booking (considering buffer/duration)
    0.07071 seconds ./spec/services/availability_service_spec.rb:99
  User scopes .staff_users returns admin, manager, and staff roles
    0.07038 seconds ./spec/models/user_spec.rb:54

Top 7 slowest example groups:
  MultiTenant Registration
    0.37631 seconds average (0.37631 seconds / 1 example) ./spec/requests/multi_tenant_registration_spec.rb:5
  BookingManager
    0.07142 seconds average (0.99988 seconds / 14 examples) ./spec/services/booking_manager_spec.rb:5
  AvailabilityService
    0.07089 seconds average (0.28356 seconds / 4 examples) ./spec/services/availability_service_spec.rb:4
  Booking
    0.05628 seconds average (0.50654 seconds / 9 examples) ./spec/models/booking_spec.rb:3
  User
    0.056 seconds average (0.78399 seconds / 14 examples) ./spec/models/user_spec.rb:5
  ServiceTemplate
    0.04465 seconds average (0.22324 seconds / 5 examples) ./spec/models/service_template_spec.rb:3
  Admin Configuration
    0.04327 seconds average (0.12981 seconds / 3 examples) ./spec/system/admin/companies_spec.rb:4

Finished in 3.37 seconds (files took 4.35 seconds to load)
50 examples, 0 failures

Randomized with seed 46230

.......--- Loading seeds for seed context ---
Seeding database with sample data...
Creating default tenant...
.Default tenant created: Default Business (default) ID: 1
Creating admin user (skipped in production)...
Admin user created with email: admin@example.com and password: password123
Creating sample data for Default Business...
.Created customer: Bryce Hickle
Created customer: Willard Adams
Created customer: Joy Schultz
Created service: Basic Consultation
Created service: Website Setup
Created service: Monthly Support
Created staff member: Staff Member 1
.Created staff member: Staff Member 2
Created booking at 2025-04-21 09:00 - 09:30 for Staff Member 1
Created booking at 2025-04-15 12:00 - 14:00 for Staff Member 1
Created booking at 2025-04-07 15:00 - 16:00 for Staff Member 1
Created booking at 2025-04-09 09:00 - 11:00 for Staff Member 2
Created booking at 2025-04-17 12:00 - 13:00 for Staff Member 2
Created booking at 2025-04-16 15:00 - 16:00 for Staff Member 2
Seed data creation complete!
.Created admin user: bizblaststeam@gmail.com with password from ENV
..............Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)
...

Top 10 slowest examples (1.1 seconds, 28.6% of total time):
  PromotionManager.apply_promotion_to_booking with a valid fixed amount promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.21931 seconds ./spec/services/promotion_manager_spec.rb:156
  Admin Debug Page GET /admin/debug when no tenants exist shows the 'Back to Homepage' link
    0.13022 seconds ./spec/requests/admin/debug_spec.rb:46
  PromotionManager.apply_promotion_to_invoice with a valid percentage promotion applies discount, updates invoice, increments usage, creates redemption
    0.11859 seconds ./spec/services/promotion_manager_spec.rb:293
  PromotionManager.apply_promotion_to_booking with an invalid promotion code returns the validation error and does not change booking or redemptions
    0.09531 seconds ./spec/services/promotion_manager_spec.rb:183
  Admin Debug Page GET /admin/debug when tenants exist provides correct testing links using the first tenant
    0.09228 seconds ./spec/requests/admin/debug_spec.rb:77
  PromotionManager.apply_promotion_to_booking when fixed discount is greater than booking amount discounts amount to 0 and records correct discount amount
    0.09058 seconds ./spec/services/promotion_manager_spec.rb:217
  PromotionManager.apply_promotion_to_booking with a valid percentage promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.08928 seconds ./spec/services/promotion_manager_spec.rb:129
  Application Routes Admin routes when authenticated GET /admin returns success
    0.088 seconds ./spec/requests/routes_spec.rb:44
  PromotionManager.apply_promotion_to_booking when booking amount is already 0 does not apply further discount but records redemption and increments usage
    0.08729 seconds ./spec/services/promotion_manager_spec.rb:246
  PromotionManager.apply_promotion_to_booking when usage limit is reached between validation and application returns an error and does not apply the promotion
    0.087 seconds ./spec/services/promotion_manager_spec.rb:198

Top 7 slowest example groups:
  PromotionManager
    0.08646 seconds average (1.56 seconds / 18 examples) ./spec/services/promotion_manager_spec.rb:5
  Admin Debug Page
    0.07695 seconds average (0.8465 seconds / 11 examples) ./spec/requests/admin/debug_spec.rb:5
  Application Routes
    0.06823 seconds average (0.40937 seconds / 6 examples) ./spec/requests/routes_spec.rb:3
  TenantCustomer
    0.0546 seconds average (0.273 seconds / 5 examples) ./spec/models/tenant_customer_spec.rb:5
  StaffMember
    0.04604 seconds average (0.23022 seconds / 5 examples) ./spec/models/service_provider_spec.rb:5
  Business
    0.0406 seconds average (0.40598 seconds / 10 examples) ./spec/models/business_spec.rb:5
  HomeController
    0.04035 seconds average (0.04035 seconds / 1 example) ./spec/controllers/home_controller_spec.rb:5

Finished in 3.83 seconds (files took 4.34 seconds to load)
56 examples, 0 failures

Randomized with seed 65106

.
.
Top 10 slowest examples (1.35 seconds, 34.9% of total time):
  MarketingService.get_campaign_metrics for a combined campaign returns combined placeholder metrics
    0.24476 seconds ./spec/services/marketing_service_spec.rb:221
  MarketingService.get_campaign_metrics for an email campaign returns placeholder email metrics
    0.19786 seconds ./spec/services/marketing_service_spec.rb:195
  AnalyticsProcessingJob#perform with report_type: booking_summary with tenant_id processes booking summary scoped to the tenant
    0.17917 seconds ./spec/jobs/analytics_processing_job_spec.rb:63
  MarketingService.get_campaign_metrics for an SMS campaign returns metrics based on associated SmsMessages
    0.1645 seconds ./spec/services/marketing_service_spec.rb:204
  AnalyticsProcessingJob#perform with report_type: booking_summary without tenant_id (global) processes booking summary for all tenants
    0.11001 seconds ./spec/jobs/analytics_processing_job_spec.rb:45
  Maintenance GET /maintenance bypasses tenant setting
    0.10236 seconds ./spec/requests/maintenance_spec.rb:23
  MarketingService.segment_customers with :service_id filter returns customers who booked a specific service
    0.09174 seconds ./spec/services/marketing_service_spec.rb:260
  MarketingService.segment_customers with combined filters returns customers matching all criteria
    0.09012 seconds ./spec/services/marketing_service_spec.rb:278
  MarketingService.cancel_campaign when campaign is running updates status to cancelled
    0.08606 seconds ./spec/services/marketing_service_spec.rb:164
  MarketingService.segment_customers with :has_booking_in_last_days filter returns customers with recent bookings
    0.08604 seconds ./spec/services/marketing_service_spec.rb:248

Top 7 slowest example groups:
  AnalyticsProcessingJob
    0.12429 seconds average (0.37288 seconds / 3 examples) ./spec/jobs/analytics_processing_job_spec.rb:5
  MarketingService
    0.08438 seconds average (2.11 seconds / 25 examples) ./spec/services/marketing_service_spec.rb:5
  Maintenance
    0.0557 seconds average (0.22279 seconds / 4 examples) ./spec/requests/maintenance_spec.rb:5
  TenantScoped
    0.05437 seconds average (0.21746 seconds / 4 examples) ./spec/models/tenant_scoped_spec.rb:5
  StaffMember
    0.05363 seconds average (0.64354 seconds / 12 examples) ./spec/models/staff_member_spec.rb:5
  ApplicationMailer
    0.03764 seconds average (0.07529 seconds / 2 examples) ./spec/mailers/application_mailer_spec.rb:5
  Health Checks
    0.03342 seconds average (0.16709 seconds / 5 examples) ./spec/requests/health_spec.rb:5

Finished in 3.88 seconds (files took 4.36 seconds to load)
55 examples, 0 failures

Randomized with seed 4068

.......Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)
Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)
.........

Top 10 slowest examples (2.24 seconds, 47.5% of total time):
  Admin Companies POST /admin/businesses creates a new business
    0.96392 seconds ./spec/requests/admin/companies_spec.rb:49
  MultiTenant Email Uniqueness allows the same email to be used across different tenants when properly configured
    0.34628 seconds ./spec/integration/multi_tenant_registration_spec.rb:6
  Admin Companies DELETE /admin/businesses/:id deletes a business
    0.22564 seconds ./spec/requests/admin/companies_spec.rb:67
  SmsService.send_booking_confirmation calls send_message with the correct arguments and formatted message
    0.11997 seconds ./spec/services/sms_service_spec.rb:87
  Admin Companies GET /admin/businesses lists all businesses
    0.11473 seconds ./spec/requests/admin/companies_spec.rb:41
  Admin Dashboard GET /admin displays the admin dashboard
    0.10321 seconds ./spec/requests/admin/dashboard_spec.rb:7
  Service scopes .active returns only active services
    0.09336 seconds ./spec/models/service_spec.rb:37
  Admin Dashboard GET /admin shows system metrics
    0.09146 seconds ./spec/requests/admin/dashboard_spec.rb:13
  Admin Companies authentication allows authenticated admin users to access
    0.09075 seconds ./spec/requests/admin/companies_spec.rb:34
  Authentication user sign up allows a new user to sign up with proper business context
    0.0907 seconds ./spec/system/authentication_spec.rb:86

Top 9 slowest example groups:
  MultiTenant Email Uniqueness
    0.34721 seconds average (0.34721 seconds / 1 example) ./spec/integration/multi_tenant_registration_spec.rb:5
  Admin Companies
    0.2083 seconds average (1.67 seconds / 8 examples) ./spec/requests/admin/companies_spec.rb:5
  Admin Dashboard
    0.09549 seconds average (0.28648 seconds / 3 examples) ./spec/requests/admin/dashboard_spec.rb:5
  Authentication
    0.07148 seconds average (0.64334 seconds / 9 examples) ./spec/system/authentication_spec.rb:6
  SmsService
    0.06991 seconds average (0.83894 seconds / 12 examples) ./spec/services/sms_service_spec.rb:5
  Home
    0.05061 seconds average (0.25303 seconds / 5 examples) ./spec/requests/home_spec.rb:5
  Service
    0.04196 seconds average (0.37761 seconds / 9 examples) ./spec/models/service_spec.rb:5
  ApplicationJob
    0.03865 seconds average (0.03865 seconds / 1 example) ./spec/jobs/application_job_spec.rb:5
  Database seeds
    0.0202 seconds average (0.20195 seconds / 10 examples) ./spec/seeds/seeds_spec.rb:6

Finished in 4.72 seconds (files took 4.37 seconds to load)
58 examples, 0 failures

Randomized with seed 4290

Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)

219 examples, 0 failures

Took 10 seconds
