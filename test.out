4 processes for 33 specs, ~ 8 specs per process
Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 54214
..Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 11955
...Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 24604
......Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 18383
..........................................................................................................................................................
..
Top 10 slowest examples (1.16 seconds, 35.6% of total time):
  MultiTenant Registration users with identical emails in different tenants allows registration and authentication with the same email in different businesses
    0.34159 seconds ./spec/requests/multi_tenant_registration_spec.rb:23
  AvailabilityService.available_slots when staff member has standard 9-5 availability and an existing appointment conflicts excludes slots that overlap with the booking (considering buffer/duration)
    0.16799 seconds ./spec/services/availability_service_spec.rb:99
  BookingManager.create_booking when the time slot is not available does not schedule any reminders
    0.104 seconds ./spec/services/booking_manager_spec.rb:101
  BookingManager.create_booking when the time slot is available creates a new booking
    0.09303 seconds ./spec/services/booking_manager_spec.rb:53
  AvailabilityService.available_slots when staff member has standard 9-5 availability and no existing appointments returns slots for a different interval (e.g., 15 mins)
    0.08496 seconds ./spec/services/availability_service_spec.rb:75
  BookingManager.cancel_booking records the cancellation reason if provided
    0.07595 seconds ./spec/services/booking_manager_spec.rb:234
  User scopes .active returns only active users
    0.07449 seconds ./spec/models/user_spec.rb:49
  BookingManager.create_booking when the time slot is available schedules two booking reminders
    0.07312 seconds ./spec/services/booking_manager_spec.rb:68
  AvailabilityService.available_slots when staff member has standard 9-5 availability and no existing appointments returns all slots within the 9-5 range for a 60min service
    0.07091 seconds ./spec/services/availability_service_spec.rb:53
  User role enum defines roles
    0.06993 seconds ./spec/models/user_spec.rb:61

Top 7 slowest example groups:
  MultiTenant Registration
    0.34356 seconds average (0.34356 seconds / 1 example) ./spec/requests/multi_tenant_registration_spec.rb:5
  AvailabilityService
    0.09588 seconds average (0.38353 seconds / 4 examples) ./spec/services/availability_service_spec.rb:4
  BookingManager
    0.07068 seconds average (0.98957 seconds / 14 examples) ./spec/services/booking_manager_spec.rb:5
  User
    0.05286 seconds average (0.74003 seconds / 14 examples) ./spec/models/user_spec.rb:5
  Booking
    0.04684 seconds average (0.42155 seconds / 9 examples) ./spec/models/booking_spec.rb:3
  ServiceTemplate
    0.04033 seconds average (0.20164 seconds / 5 examples) ./spec/models/service_template_spec.rb:3
  Admin Configuration
    0.03846 seconds average (0.11537 seconds / 3 examples) ./spec/system/admin/companies_spec.rb:4

Finished in 3.25 seconds (files took 4.48 seconds to load)
50 examples, 0 failures

Randomized with seed 24604

...................Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 46.61% (1074 / 2304)
Branch Coverage: 16.86% (88 / 522)
.....

Top 10 slowest examples (1.2 seconds, 32.2% of total time):
  MarketingService.get_campaign_metrics for a combined campaign returns combined placeholder metrics
    0.24374 seconds ./spec/services/marketing_service_spec.rb:221
  MarketingService.get_campaign_metrics for an email campaign returns placeholder email metrics
    0.17009 seconds ./spec/services/marketing_service_spec.rb:195
  MarketingService.get_campaign_metrics for an SMS campaign returns metrics based on associated SmsMessages
    0.1587 seconds ./spec/services/marketing_service_spec.rb:204
  AnalyticsProcessingJob#perform with report_type: booking_summary without tenant_id (global) processes booking summary for all tenants
    0.1357 seconds ./spec/jobs/analytics_processing_job_spec.rb:45
  AnalyticsProcessingJob#perform with report_type: booking_summary with tenant_id processes booking summary scoped to the tenant
    0.08804 seconds ./spec/jobs/analytics_processing_job_spec.rb:63
  MarketingService.cancel_campaign when campaign is scheduled updates status to cancelled
    0.08313 seconds ./spec/services/marketing_service_spec.rb:155
  MarketingService.segment_customers with :service_id filter returns customers who booked a specific service
    0.08265 seconds ./spec/services/marketing_service_spec.rb:260
  AnalyticsProcessingJob#perform with unknown report_type logs an error
    0.08194 seconds ./spec/jobs/analytics_processing_job_spec.rb:79
  MarketingService.segment_customers with combined filters returns customers matching all criteria
    0.08 seconds ./spec/services/marketing_service_spec.rb:278
  StaffMember#available_at? with exceptions returns true for times within exception intervals
    0.07842 seconds ./spec/models/staff_member_spec.rb:103

Top 7 slowest example groups:
  AnalyticsProcessingJob
    0.10267 seconds average (0.30801 seconds / 3 examples) ./spec/jobs/analytics_processing_job_spec.rb:5
  MarketingService
    0.07886 seconds average (1.97 seconds / 25 examples) ./spec/services/marketing_service_spec.rb:5
  TenantScoped
    0.0584 seconds average (0.23361 seconds / 4 examples) ./spec/models/tenant_scoped_spec.rb:5
  StaffMember
    0.05753 seconds average (0.69033 seconds / 12 examples) ./spec/models/staff_member_spec.rb:5
  ApplicationMailer
    0.04741 seconds average (0.09483 seconds / 2 examples) ./spec/mailers/application_mailer_spec.rb:5
  Maintenance
    0.04685 seconds average (0.1874 seconds / 4 examples) ./spec/requests/maintenance_spec.rb:5
  Health Checks
    0.03825 seconds average (0.19127 seconds / 5 examples) ./spec/requests/health_spec.rb:5

Finished in 3.73 seconds (files took 4.47 seconds to load)
55 examples, 0 failures

Randomized with seed 54214

.

Top 10 slowest examples (1.09 seconds, 29.0% of total time):
  PromotionManager.apply_promotion_to_booking with a valid fixed amount promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.17412 seconds ./spec/services/promotion_manager_spec.rb:156
  Admin Debug Page GET /admin/debug when no tenants exist shows 'No tenants found' message
    0.15032 seconds ./spec/requests/admin/debug_spec.rb:31
  PromotionManager.apply_promotion_to_booking when fixed discount is greater than booking amount discounts amount to 0 and records correct discount amount
    0.1378 seconds ./spec/services/promotion_manager_spec.rb:217
  PromotionManager.apply_promotion_to_invoice with a valid percentage promotion applies discount, updates invoice, increments usage, creates redemption
    0.11306 seconds ./spec/services/promotion_manager_spec.rb:293
  TenantCustomer validations validates uniqueness of email scoped to business_id
    0.09463 seconds ./spec/models/tenant_customer_spec.rb:18
  PromotionManager.apply_promotion_to_booking with an invalid promotion code returns the validation error and does not change booking or redemptions
    0.0912 seconds ./spec/services/promotion_manager_spec.rb:183
  PromotionManager.apply_promotion_to_booking when booking amount is already 0 does not apply further discount but records redemption and increments usage
    0.0838 seconds ./spec/services/promotion_manager_spec.rb:246
  PromotionManager.apply_promotion_to_booking with a valid percentage promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.08334 seconds ./spec/services/promotion_manager_spec.rb:129
  PromotionManager.validate_promotion_code with a single-use code (limit=1) already redeemed by the customer returns valid: false and an error message
    0.08319 seconds ./spec/services/promotion_manager_spec.rb:84
  PromotionManager.apply_promotion_to_booking when usage limit is reached between validation and application returns an error and does not apply the promotion
    0.07838 seconds ./spec/services/promotion_manager_spec.rb:198

Top 7 slowest example groups:
  PromotionManager
    0.08399 seconds average (1.51 seconds / 18 examples) ./spec/services/promotion_manager_spec.rb:5
  Admin Debug Page
    0.06966 seconds average (0.76627 seconds / 11 examples) ./spec/requests/admin/debug_spec.rb:5
  Application Routes
    0.06504 seconds average (0.39023 seconds / 6 examples) ./spec/requests/routes_spec.rb:3
  TenantCustomer
    0.05681 seconds average (0.28405 seconds / 5 examples) ./spec/models/tenant_customer_spec.rb:5
  StaffMember
    0.05238 seconds average (0.26189 seconds / 5 examples) ./spec/models/service_provider_spec.rb:5
  Business
    0.04378 seconds average (0.43782 seconds / 10 examples) ./spec/models/business_spec.rb:5
  HomeController
    0.04136 seconds average (0.04136 seconds / 1 example) ./spec/controllers/home_controller_spec.rb:5

Finished in 3.75 seconds (files took 4.46 seconds to load)
56 examples, 0 failures

Randomized with seed 11955

...........Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 46.61% (1074 / 2304)
Branch Coverage: 16.86% (88 / 522)
.Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 53.04% (1222 / 2304)
Branch Coverage: 25.29% (132 / 522)
....--- Loading seeds for seed context ---
Seeding database with sample data...
Creating default tenant...
Default tenant created: Default Business (default) ID: 1
Creating admin user (skipped in production)...
Admin user created with email: admin@example.com and password: password123
Creating sample data for Default Business...
Created customer: Lacey Powlowski
Created customer: Nidia Kilback
Created customer: Jon Hintz
Created service: Basic Consultation
Created service: Website Setup
Created service: Monthly Support
Created staff member: Staff Member 1
Created staff member: Staff Member 2
Created booking at 2025-04-21 09:00 - 10:00 for Staff Member 1
Created booking at 2025-04-08 12:00 - 14:00 for Staff Member 1
Created booking at 2025-04-23 09:00 - 10:00 for Staff Member 2
Created booking at 2025-04-10 12:00 - 14:00 for Staff Member 2
Created booking at 2025-04-16 15:00 - 16:00 for Staff Member 2
Seed data creation complete!
Created admin user: bizblaststeam@gmail.com with password from ENV
...........

Top 10 slowest examples (2.27 seconds, 49.1% of total time):
  Admin Companies POST /admin/businesses creates a new business
    0.96735 seconds ./spec/requests/admin/companies_spec.rb:49
  MultiTenant Email Uniqueness allows the same email to be used across different tenants when properly configured
    0.3346 seconds ./spec/integration/multi_tenant_registration_spec.rb:6
  Admin Companies authentication allows authenticated admin users to access
    0.23562 seconds ./spec/requests/admin/companies_spec.rb:34
  SmsService.send_booking_reminder for 1h timeframe calls send_message with the correct arguments and formatted message
    0.12664 seconds ./spec/services/sms_service_spec.rb:127
  Admin Companies DELETE /admin/businesses/:id deletes a business
    0.11753 seconds ./spec/requests/admin/companies_spec.rb:67
  Authentication user sign in shows errors when login information is invalid
    0.11099 seconds ./spec/system/authentication_spec.rb:143
  Authentication user registration shows errors with invalid registration information
    0.10362 seconds ./spec/system/authentication_spec.rb:60
  Admin Companies GET /admin/businesses lists all businesses
    0.09853 seconds ./spec/requests/admin/companies_spec.rb:41
  Authentication user sign out allows a signed-in user to sign out
    0.08911 seconds ./spec/system/authentication_spec.rb:159
  SmsService.process_webhook with delivered status updates the sms message status to delivered
    0.08466 seconds ./spec/services/sms_service_spec.rb:156

Top 9 slowest example groups:
  MultiTenant Email Uniqueness
    0.33548 seconds average (0.33548 seconds / 1 example) ./spec/integration/multi_tenant_registration_spec.rb:5
  Admin Companies
    0.2128 seconds average (1.7 seconds / 8 examples) ./spec/requests/admin/companies_spec.rb:5
  Authentication
    0.08179 seconds average (0.73611 seconds / 9 examples) ./spec/system/authentication_spec.rb:6
  Admin Dashboard
    0.06771 seconds average (0.20312 seconds / 3 examples) ./spec/requests/admin/dashboard_spec.rb:5
  SmsService
    0.06749 seconds average (0.80991 seconds / 12 examples) ./spec/services/sms_service_spec.rb:5
  Home
    0.04467 seconds average (0.22336 seconds / 5 examples) ./spec/requests/home_spec.rb:5
  Service
    0.0432 seconds average (0.38878 seconds / 9 examples) ./spec/models/service_spec.rb:5
  ApplicationJob
    0.03726 seconds average (0.03726 seconds / 1 example) ./spec/jobs/application_job_spec.rb:5
  Database seeds
    0.01223 seconds average (0.12234 seconds / 10 examples) ./spec/seeds/seeds_spec.rb:6

Finished in 4.62 seconds (files took 4.51 seconds to load)
58 examples, 0 failures

Randomized with seed 18383

Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)

219 examples, 0 failures

Took 10 seconds
