4 processes for 33 specs, ~ 8 specs per process
Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 7097
.Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 65102
..Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 13839
........Applying early Sprockets/Propshaft conflict fix...
Could not load sprockets/manifest: cannot load such file -- sprockets/manifest

Randomized with seed 16375
...........................................................................................................................................................................

Top 10 slowest examples (1.13 seconds, 34.6% of total time):
  MultiTenant Registration users with identical emails in different tenants allows registration and authentication with the same email in different businesses
    0.33984 seconds ./spec/requests/multi_tenant_registration_spec.rb:23
  AvailabilityService.available_slots when staff member has standard 9-5 availability and an existing appointment conflicts excludes slots that overlap with the booking (considering buffer/duration)
    0.13549 seconds ./spec/services/availability_service_spec.rb:99
  User acts_as_tenant integration scopes queries to the current tenant
    0.10277 seconds ./spec/models/user_spec.rb:91
  BookingManager.update_booking when updating time to an available slot reschedules two reminders for the new time
    0.09407 seconds ./spec/services/booking_manager_spec.rb:167
  BookingManager.cancel_booking records the cancellation reason if provided
    0.08322 seconds ./spec/services/booking_manager_spec.rb:234
  BookingManager.cancel_booking updates the booking status to cancelled
    0.0819 seconds ./spec/services/booking_manager_spec.rb:228
  BookingManager.create_booking when the time slot is available creates a new booking
    0.07795 seconds ./spec/services/booking_manager_spec.rb:53
  BookingManager.create_booking when the time slot is available schedules two booking reminders
    0.0726 seconds ./spec/services/booking_manager_spec.rb:68
  User scopes .active returns only active users
    0.07194 seconds ./spec/models/user_spec.rb:49
  User scopes .staff_users returns admin, manager, and staff roles
    0.0715 seconds ./spec/models/user_spec.rb:54

Top 7 slowest example groups:
  MultiTenant Registration
    0.34164 seconds average (0.34164 seconds / 1 example) ./spec/requests/multi_tenant_registration_spec.rb:5
  AvailabilityService
    0.08874 seconds average (0.35496 seconds / 4 examples) ./spec/services/availability_service_spec.rb:4
  BookingManager
    0.06872 seconds average (0.96214 seconds / 14 examples) ./spec/services/booking_manager_spec.rb:5
  User
    0.05609 seconds average (0.78529 seconds / 14 examples) ./spec/models/user_spec.rb:5
  Booking
    0.04581 seconds average (0.41232 seconds / 9 examples) ./spec/models/booking_spec.rb:3
  Admin Configuration
    0.04525 seconds average (0.13574 seconds / 3 examples) ./spec/system/admin/companies_spec.rb:4
  ServiceTemplate
    0.04463 seconds average (0.22315 seconds / 5 examples) ./spec/models/service_template_spec.rb:3

Finished in 3.27 seconds (files took 4.37 seconds to load)
50 examples, 0 failures

Randomized with seed 13839

............Coverage report generated for RSpec-3 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 42.58% (981 / 2304)
Branch Coverage: 8.81% (46 / 522)
...

Top 10 slowest examples (1.03 seconds, 27.7% of total time):
  PromotionManager.apply_promotion_to_invoice with an invalid promotion code returns validation error and does not modify invoice or redemption
    0.12197 seconds ./spec/services/promotion_manager_spec.rb:323
  PromotionManager.apply_promotion_to_booking when booking amount is already 0 does not apply further discount but records redemption and increments usage
    0.11825 seconds ./spec/services/promotion_manager_spec.rb:246
  Application Routes Public routes GET / returns success
    0.11726 seconds ./spec/requests/routes_spec.rb:13
  PromotionManager.validate_promotion_code with a code that reached its usage limit returns valid: false and an error message
    0.10625 seconds ./spec/services/promotion_manager_spec.rb:73
  PromotionManager.validate_promotion_code with a single-use code (limit=1) not yet redeemed by the customer returns valid: true
    0.10422 seconds ./spec/services/promotion_manager_spec.rb:100
  PromotionManager.validate_promotion_code with a valid, active code returns valid: true and the promotion object
    0.09967 seconds ./spec/services/promotion_manager_spec.rb:37
  PromotionManager.apply_promotion_to_invoice with a valid percentage promotion applies discount, updates invoice, increments usage, creates redemption
    0.09662 seconds ./spec/services/promotion_manager_spec.rb:293
  PromotionManager.apply_promotion_to_booking with a valid fixed amount promotion applies the discount, updates the booking, increments usage, and creates redemption
    0.09578 seconds ./spec/services/promotion_manager_spec.rb:156
  Admin Debug Page GET /admin/debug when tenants exist provides correct testing links using the first tenant
    0.08887 seconds ./spec/requests/admin/debug_spec.rb:77
  Application Routes Admin routes when authenticated GET /admin/dashboard returns success
    0.08305 seconds ./spec/requests/routes_spec.rb:49

Top 7 slowest example groups:
  PromotionManager
    0.08351 seconds average (1.5 seconds / 18 examples) ./spec/services/promotion_manager_spec.rb:5
  Application Routes
    0.07762 seconds average (0.46571 seconds / 6 examples) ./spec/requests/routes_spec.rb:3
  Admin Debug Page
    0.06472 seconds average (0.71196 seconds / 11 examples) ./spec/requests/admin/debug_spec.rb:5
  TenantCustomer
    0.05505 seconds average (0.27526 seconds / 5 examples) ./spec/models/tenant_customer_spec.rb:5
  HomeController
    0.0477 seconds average (0.0477 seconds / 1 example) ./spec/controllers/home_controller_spec.rb:5
  Business
    0.04502 seconds average (0.45025 seconds / 10 examples) ./spec/models/business_spec.rb:5
  StaffMember
    0.04159 seconds average (0.20793 seconds / 5 examples) ./spec/models/service_provider_spec.rb:5

Finished in 3.72 seconds (files took 4.34 seconds to load)
56 examples, 0 failures

Randomized with seed 7097

..

Top 10 slowest examples (1.23 seconds, 32.9% of total time):
  MarketingService.get_campaign_metrics for a combined campaign returns combined placeholder metrics
    0.25278 seconds ./spec/services/marketing_service_spec.rb:221
  MarketingService.get_campaign_metrics for an SMS campaign returns metrics based on associated SmsMessages
    0.16648 seconds ./spec/services/marketing_service_spec.rb:204
  MarketingService.get_campaign_metrics for an email campaign returns placeholder email metrics
    0.16255 seconds ./spec/services/marketing_service_spec.rb:195
  AnalyticsProcessingJob#perform with report_type: booking_summary with tenant_id processes booking summary scoped to the tenant
    0.13999 seconds ./spec/jobs/analytics_processing_job_spec.rb:63
  StaffMember validations is expected to validate that :name cannot be empty/falsy
    0.08919 seconds ./spec/models/staff_member_spec.rb:16
  MarketingService.create_campaign with invalid parameters does not create a campaign
    0.08778 seconds ./spec/services/marketing_service_spec.rb:70
  MarketingService.segment_customers with :service_id filter returns customers who booked a specific service
    0.08346 seconds ./spec/services/marketing_service_spec.rb:260
  MarketingService.segment_customers with :no_booking_in_last_days filter returns customers without recent bookings
    0.08151 seconds ./spec/services/marketing_service_spec.rb:270
  MarketingService.segment_customers with :has_booking_in_last_days filter returns no customers if threshold is too short
    0.08098 seconds ./spec/services/marketing_service_spec.rb:253
  MarketingService.segment_customers with :has_booking_in_last_days filter returns customers with recent bookings
    0.08088 seconds ./spec/services/marketing_service_spec.rb:248

Top 7 slowest example groups:
  AnalyticsProcessingJob
    0.09974 seconds average (0.29921 seconds / 3 examples) ./spec/jobs/analytics_processing_job_spec.rb:5
  MarketingService
    0.07974 seconds average (1.99 seconds / 25 examples) ./spec/services/marketing_service_spec.rb:5
  TenantScoped
    0.05676 seconds average (0.22702 seconds / 4 examples) ./spec/models/tenant_scoped_spec.rb:5
  Maintenance
    0.05608 seconds average (0.22432 seconds / 4 examples) ./spec/requests/maintenance_spec.rb:5
  StaffMember
    0.05529 seconds average (0.66349 seconds / 12 examples) ./spec/models/staff_member_spec.rb:5
  ApplicationMailer
    0.03935 seconds average (0.0787 seconds / 2 examples) ./spec/mailers/application_mailer_spec.rb:5
  Health Checks
    0.0364 seconds average (0.182 seconds / 5 examples) ./spec/requests/health_spec.rb:5

Finished in 3.73 seconds (files took 4.37 seconds to load)
55 examples, 0 failures

Randomized with seed 65102

...--- Loading seeds for seed context ---
Seeding database with sample data...
Creating default tenant...
Default tenant created: Default Business (default) ID: 1
Creating admin user (skipped in production)...
Admin user created with email: admin@example.com and password: password123
Creating sample data for Default Business...
Created customer: Merideth Nader
Created customer: Sung Hermiston
Created customer: Erasmo Marquardt
Created service: Basic Consultation
Created service: Website Setup
Created service: Monthly Support
Created staff member: Staff Member 1
Created staff member: Staff Member 2
Created booking at 2025-04-14 09:00 - 10:00 for Staff Member 1
Created booking at 2025-04-15 12:00 - 14:00 for Staff Member 1
Created booking at 2025-04-09 09:00 - 09:30 for Staff Member 2
Created booking at 2025-04-24 12:00 - 12:30 for Staff Member 2
Created booking at 2025-04-16 15:00 - 16:00 for Staff Member 2
Seed data creation complete!
Created admin user: bizblaststeam@gmail.com with password from ENV
..........Coverage report generated for RSpec-2, RSpec-3 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 46.01% (1060 / 2304)
Branch Coverage: 15.33% (80 / 522)
...Coverage report generated for RSpec-, RSpec-2, RSpec-3 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 53.04% (1222 / 2304)
Branch Coverage: 25.1% (131 / 522)
....

Top 10 slowest examples (2.3 seconds, 49.3% of total time):
  Admin Companies POST /admin/businesses creates a new business
    0.96174 seconds ./spec/requests/admin/companies_spec.rb:49
  MultiTenant Email Uniqueness allows the same email to be used across different tenants when properly configured
    0.36238 seconds ./spec/integration/multi_tenant_registration_spec.rb:6
  SmsService.send_booking_confirmation calls send_message with the correct arguments and formatted message
    0.20861 seconds ./spec/services/sms_service_spec.rb:87
  Admin Dashboard GET /admin has a link to tenant debug information
    0.1437 seconds ./spec/requests/admin/dashboard_spec.rb:19
  Admin Companies GET /admin/businesses lists all businesses
    0.13515 seconds ./spec/requests/admin/companies_spec.rb:41
  Authentication user sign out allows a signed-in user to sign out
    0.10839 seconds ./spec/system/authentication_spec.rb:40
  Admin Companies authentication allows authenticated admin users to access
    0.10334 seconds ./spec/requests/admin/companies_spec.rb:34
  Authentication user sign out allows a signed-in user to sign out
    0.09312 seconds ./spec/system/authentication_spec.rb:159
  Admin Dashboard GET /admin shows system metrics
    0.09235 seconds ./spec/requests/admin/dashboard_spec.rb:13
  Authentication user sign up shows errors when signup information is invalid
    0.08878 seconds ./spec/system/authentication_spec.rb:117

Top 9 slowest example groups:
  MultiTenant Email Uniqueness
    0.36269 seconds average (0.36269 seconds / 1 example) ./spec/integration/multi_tenant_registration_spec.rb:5
  Admin Companies
    0.19458 seconds average (1.56 seconds / 8 examples) ./spec/requests/admin/companies_spec.rb:5
  Admin Dashboard
    0.10545 seconds average (0.31635 seconds / 3 examples) ./spec/requests/admin/dashboard_spec.rb:5
  Authentication
    0.08041 seconds average (0.7237 seconds / 9 examples) ./spec/system/authentication_spec.rb:6
  SmsService
    0.07389 seconds average (0.88663 seconds / 12 examples) ./spec/services/sms_service_spec.rb:5
  Service
    0.04612 seconds average (0.4151 seconds / 9 examples) ./spec/models/service_spec.rb:5
  Home
    0.03491 seconds average (0.17454 seconds / 5 examples) ./spec/requests/home_spec.rb:5
  ApplicationJob
    0.0276 seconds average (0.0276 seconds / 1 example) ./spec/jobs/application_job_spec.rb:5
  Database seeds
    0.01312 seconds average (0.13116 seconds / 10 examples) ./spec/seeds/seeds_spec.rb:6

Finished in 4.66 seconds (files took 4.37 seconds to load)
58 examples, 0 failures

Randomized with seed 16375

Coverage report generated for RSpec-, RSpec-2, RSpec-3, RSpec-4 to /Users/brianlane/bizblasts/coverage.
Line Coverage: 56.47% (1301 / 2304)
Branch Coverage: 30.08% (157 / 522)

219 examples, 0 failures

Took 9 seconds
